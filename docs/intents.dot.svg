<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="379pt" height="652pt" viewBox="0 0 379 651.74"><g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 647.7384)"><title>G</title><polygon fill="#fff" stroke="transparent" points="-4 4 -4 -647.738 375 -647.738 375 4 -4 4"/><g id="clust1" class="cluster"><title>cluster_0</title><polygon fill="#add8e6" stroke="#add8e6" points="238 -98 238 -324 358 -324 358 -98 238 -98"/><text x="298" y="-312" fill="#000" font-family="Helvetica,sans-Serif" font-size="10" text-anchor="middle">Cloud services</text></g><g id="clust2" class="cluster"><title>cluster_1</title><polygon fill="none" stroke="#000" stroke-dasharray="1 5" points="117 -8 117 -79 333 -79 333 -8 117 -8"/><text x="225" y="-67" fill="#000" font-family="Helvetica,sans-Serif" font-size="10" text-anchor="middle">Devices</text></g><g id="clust3" class="cluster"><title>cluster_3</title><polygon fill="#32cd32" stroke="#32cd32" points="8 -171 8 -553 230 -553 230 -171 8 -171"/><text x="119" y="-541" fill="#000" font-family="Helvetica,sans-Serif" font-size="10" text-anchor="middle">Android activities</text></g><g id="node1" class="node"><title>user</title><ellipse cx="71" cy="-621.369" fill="none" stroke="#000" rx="22.239" ry="22.239"/><text x="71" y="-618.869" fill="#000" font-family="Helvetica,sans-Serif" font-size="10" text-anchor="middle">User</text></g><g id="node2" class="node"><title>k6nele</title><g id="a_node2"><a xlink:title="Maps natural language audio to an Android intent using an external recognition service, possibly followed by its own rewrite rules, and then launches the intent."><polygon fill="#ff0" stroke="#000" points="126 -526 16 -526 16 -490 126 -490 126 -526"/><text x="71" y="-511" fill="#000" font-family="Helvetica,sans-Serif" font-size="10" text-anchor="middle">Kõnele</text><text x="71" y="-500" fill="#000" font-family="Helvetica,sans-Serif" font-size="10" text-anchor="middle">SpeechActionActivity</text></a></g></g><g id="edge1" class="edge"><title>user-&gt;k6nele</title><path fill="none" stroke="#000" d="M55.6858,-605.0001C50.2571,-598.1249 44.8033,-589.7071 42,-581 36.5285,-564.0052 44.2381,-545.3005 53.078,-531.0796"/><polygon fill="#000" stroke="#000" points="54.838 -532.226 56.364 -526.055 51.322 -529.927 54.838 -532.226"/><text x="60.5" y="-573.8" fill="#000" font-family="monospace" font-size="9" text-anchor="middle">voice</text><text x="60.5" y="-563.8" fill="#000" font-family="monospace" font-size="9" text-anchor="middle">command</text></g><g id="edge2" class="edge"><title>k6nele-&gt;user</title><path fill="none" stroke="#000" d="M75.1114,-526.2884C77.9208,-541.0464 80.8304,-562.3478 79,-581 78.6062,-585.0131 77.9972,-589.2188 77.287,-593.3371"/><polygon fill="#000" stroke="#000" points="75.215 -592.994 76.188 -599.276 79.345 -593.758 75.215 -592.994"/><text x="95" y="-568.8" fill="#000" font-family="monospace" font-size="9" text-anchor="middle">prompt</text></g><g id="edge5" class="edge"><title>k6nele-&gt;k6nele</title><path fill="none" stroke="#000" d="M126.0733,-514.427C136.5741,-513.658 144,-511.5156 144,-508 144,-505.1985 139.2845,-503.269 132.0551,-502.2116"/><polygon fill="#000" stroke="#000" points="132.262 -500.122 126.073 -501.573 131.816 -504.298 132.262 -500.122"/><text x="160" y="-505.8" fill="#000" font-family="monospace" font-size="9" text-anchor="middle">intent</text></g><g id="node8" class="node"><title>fetch_intent</title><g id="a_node8"><a xlink:title="Fetches JSON from a URL, interprets it as an Android intent and launches it."><polygon fill="#ff0" stroke="#000" points="171.5 -396 84.5 -396 84.5 -360 171.5 -360 171.5 -396"/><text x="128" y="-381" fill="#000" font-family="Helvetica,sans-Serif" font-size="10" text-anchor="middle">Kõnele</text><text x="128" y="-370" fill="#000" font-family="Helvetica,sans-Serif" font-size="10" text-anchor="middle">FetchUrlActivity</text></a></g></g><g id="edge3" class="edge"><title>k6nele-&gt;fetch_intent</title><path fill="none" stroke="#000" d="M84.8221,-489.9842C92.2404,-479.6208 101.0542,-466.0925 107,-453 114.3872,-436.7334 119.743,-417.2796 123.1965,-402.2616"/><polygon fill="#000" stroke="#000" points="125.31 -402.432 124.56 -396.119 121.21 -401.521 125.31 -402.432"/><text x="143" y="-445.8" fill="#000" font-family="monospace" font-size="9" text-anchor="middle">intent</text><text x="143" y="-435.8" fill="#000" font-family="monospace" font-size="9" text-anchor="middle">{data=http}</text></g><g id="node9" class="node"><title>app_lightbulb</title><g id="a_node9"><a xlink:title="Maps Android intent to an action on a concrete device."><polygon fill="none" stroke="#000" points="173 -215 83 -215 83 -179 173 -179 173 -215"/><text x="128" y="-194.5" fill="#000" font-family="Helvetica,sans-Serif" font-size="10" text-anchor="middle">LightBulbActivity</text></a></g></g><g id="edge4" class="edge"><title>k6nele-&gt;app_lightbulb</title><path fill="none" stroke="#000" d="M54.0161,-489.9119C44.2894,-477.6469 34,-460.5296 34,-443 34,-443 34,-443 34,-279 34,-251.8198 56.5938,-231.5811 79.6275,-218.0106"/><polygon fill="#000" stroke="#000" points="80.67 -219.834 84.852 -215.046 78.597 -216.181 80.67 -219.834"/><text x="50" y="-375.8" fill="#000" font-family="monospace" font-size="9" text-anchor="middle">intent</text></g><g id="node3" class="node"><title>service_dialog</title><g id="a_node3"><a xlink:title="Maps a natural language string (in the incoming HTTP query) to some action (performed e.g. via other services). Responds with an Android intent (encoded in JSON)."><polygon fill="none" stroke="#000" points="324.5 -297 245.5 -297 245.5 -261 324.5 -261 324.5 -297"/><text x="285" y="-276.5" fill="#000" font-family="Helvetica,sans-Serif" font-size="10" text-anchor="middle">Dialog service</text></a></g></g><g id="node4" class="node"><title>service_smart_home</title><g id="a_node4"><a xlink:title="Maps REST queries to commands to actual devices."><polygon fill="none" stroke="#000" points="350 -142 246 -142 246 -106 350 -106 350 -142"/><text x="298" y="-121.5" fill="#000" font-family="Helvetica,sans-Serif" font-size="10" text-anchor="middle">Smart home service</text></a></g></g><g id="edge10" class="edge"><title>service_dialog-&gt;service_smart_home</title><path fill="none" stroke="#000" d="M286.5167,-260.9162C288.8428,-233.1817 293.2968,-180.0761 295.9217,-148.7795"/><polygon fill="#000" stroke="#000" points="298.044 -148.604 296.453 -142.449 293.858 -148.253 298.044 -148.604"/><text x="305" y="-194.8" fill="#000" font-family="monospace" font-size="9" text-anchor="middle">http</text></g><g id="node6" class="node"><title>device_door</title><polygon fill="none" stroke="#000" points="253 -52 199 -52 199 -16 253 -16 253 -52"/><text x="226" y="-31.5" fill="#000" font-family="Helvetica,sans-Serif" font-size="10" text-anchor="middle">Door</text></g><g id="edge12" class="edge"><title>service_smart_home-&gt;device_door</title><path fill="none" stroke="#000" d="M283.4297,-105.7872C272.2067,-91.7584 256.6149,-72.2687 244.5091,-57.1364"/><polygon fill="#000" stroke="#000" points="245.937 -55.559 240.549 -52.186 242.657 -58.183 245.937 -55.559"/></g><g id="node7" class="node"><title>device_tv</title><polygon fill="none" stroke="#000" points="325 -52 271 -52 271 -16 325 -16 325 -52"/><text x="298" y="-31.5" fill="#000" font-family="Helvetica,sans-Serif" font-size="10" text-anchor="middle">TV</text></g><g id="edge11" class="edge"><title>service_smart_home-&gt;device_tv</title><path fill="none" stroke="#000" d="M298,-105.7872C298,-92.1244 298,-73.2818 298,-58.3293"/><polygon fill="#000" stroke="#000" points="300.1 -58.186 298 -52.186 295.9 -58.186 300.1 -58.186"/></g><g id="node5" class="node"><title>device_lightbulb</title><polygon fill="none" stroke="#000" points="181 -52 125 -52 125 -16 181 -16 181 -52"/><text x="153" y="-31.5" fill="#000" font-family="Helvetica,sans-Serif" font-size="10" text-anchor="middle">Lightbulb</text></g><g id="edge8" class="edge"><title>fetch_intent-&gt;k6nele</title><path fill="none" stroke="#000" stroke-dasharray="5 2" d="M101.0988,-396.1826C89.5238,-405.6484 77.2358,-418.3176 71,-433 64.2302,-448.9397 64.4947,-468.5605 66.3116,-483.7352"/><polygon fill="#000" stroke="#000" points="64.268 -484.287 67.169 -489.943 68.428 -483.712 64.268 -484.287"/><text x="87" y="-440.8" fill="#000" font-family="monospace" font-size="9" text-anchor="middle">intent</text></g><g id="edge14" class="edge"><title>fetch_intent-&gt;service_dialog</title><path fill="none" stroke="#000" d="M175.1466,-357.142C194.0511,-347.9804 215.6578,-336.4699 234,-324 243.7224,-317.3902 253.5965,-309.1153 262.0336,-301.4701"/><polygon fill="#000" stroke="#000" points="173.876 -355.422 169.373 -359.908 175.691 -359.209 173.876 -355.422"/><polygon fill="#000" stroke="#000" points="263.57 -302.91 266.563 -297.302 260.726 -299.82 263.57 -302.91"/><text x="244" y="-334.8" fill="#000" font-family="monospace" font-size="9" text-anchor="middle">http/json</text></g><g id="edge6" class="edge"><title>fetch_intent-&gt;service_smart_home</title><path fill="none" stroke="#000" d="M171.9216,-372.8449C226.4592,-365.424 314.6846,-349.7207 334,-324 373.7793,-271.0293 335.8389,-188.1698 312.7876,-147.7622"/><polygon fill="#000" stroke="#000" points="314.337 -146.249 309.506 -142.117 310.706 -148.36 314.337 -146.249"/><text x="360" y="-235.8" fill="#000" font-family="monospace" font-size="9" text-anchor="middle">http</text></g><g id="edge9" class="edge"><title>fetch_intent-&gt;fetch_intent</title><path fill="none" stroke="#000" stroke-dasharray="5 2" d="M171.6694,-384.6165C181.9301,-384.0727 189.5,-381.8672 189.5,-378 189.5,-374.9788 184.8797,-372.9717 177.9656,-371.9789"/><polygon fill="#000" stroke="#000" points="177.84 -369.858 171.669 -371.384 177.445 -374.039 177.84 -369.858"/><text x="205.5" y="-375.8" fill="#000" font-family="monospace" font-size="9" text-anchor="middle">intent</text></g><g id="edge7" class="edge"><title>fetch_intent-&gt;app_lightbulb</title><path fill="none" stroke="#000" stroke-dasharray="5 2" d="M128,-359.9833C128,-327.2711 128,-258.0961 128,-221.2663"/><polygon fill="#000" stroke="#000" points="130.1 -221.212 128 -215.213 125.9 -221.213 130.1 -221.212"/><text x="144" y="-276.8" fill="#000" font-family="monospace" font-size="9" text-anchor="middle">intent</text></g><g id="edge13" class="edge"><title>app_lightbulb-&gt;device_lightbulb</title><path fill="none" stroke="#000" d="M130.771,-178.9334C135.2761,-149.5597 144.1938,-91.4161 149.2577,-58.3998"/><polygon fill="#000" stroke="#000" points="151.383 -58.397 150.217 -52.148 147.231 -57.76 151.383 -58.397"/></g></g></svg>